{"version":3,"file":"leaderboard.js","sourceRoot":"","sources":["../src/elements/leaderboard.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { BackButtonSvg, WhiteKingSvg, BlackKingSvg } from './svgs';\n\nexport interface PlayerType {\n  username: string,\n  points: number,\n  is_winner: boolean\n};\n\nexport interface MatchType {\n  white: {\n    username: string,\n    rating: number,\n    result: string\n  },\n  black: {\n    username: string,\n    rating: number,\n    result: string\n  }\n}\n\nexport interface DataType {\n  games: [{\n    white: {\n      username: string,\n      rating: number,\n      result: string\n    },\n    black: {\n      username: string,\n      rating: number,\n      result: string\n    }\n  }],\n  players: [{\n    username: string,\n    points: number,\n    is_winner: boolean\n  }]\n};\n\n\n@customElement('leader-dashboard')\nexport class Leaderboard extends LitElement {\n\n  @property({ type: Object })\n  data!: DataType;\n\n  @property({ type: Array })\n  players: PlayerType[]; //= [];\n\n  @state()\n  private matchData: MatchType | undefined;\n\n  constructor() {\n    super();\n    this.players = [] as PlayerType[];\n    this.fetchData();\n    this.matchData = undefined;\n  }\n\n  async fetchData() {\n    const response = await fetch('https://api.chess.com/pub/tournament/late-titled-tuesday-blitz-january-31-2023-3732262/11/1');\n    console.log(`response = ${response}`);\n    if (!response.ok) {\n      throw new Error('Network error from API');\n    }\n    this.data = await response.json();\n    console.log(`this.data = ${this.data}`);\n    this.sortData();\n    console.log(`this.players = ${this.players}`);\n  }\n\n  sortData() {\n    this.players = this.data.players;\n    this.players.sort((a, b) => {\n      if (a.is_winner === true && b.is_winner === false) return -1\n      if (b.is_winner === true && a.is_winner === false) return 1\n      if (a.points > b.points) return -1\n      if (a.points < b.points) return 1\n      else return 0\n    })\n  }\n\n  handleMatchRequest(e: CustomEvent) {\n    console.log(\"Second handleclick fctn\");\n    console.log(e);\n    this.matchData = this.data.games.filter((game) => e.detail.name === game.white.username || game.black.username)[0];\n  }\n\n  handleBackButtonClick() {\n    this.matchData = undefined;\n  }\n\n  getTournamentHtml() {\n    return html`\n      <div @match-requested=${this.handleMatchRequest}>\n        <h3 class=\"title\">Leaderboard</h3>\n        ${this.players.map(player => {\n      return html`\n            <person-details .playerData=\"${player}\"></person-details>\n          `;\n    })}\n      </div>\n    `\n  }\n\n  getGameHtml() {\n    return html`\n      <div>\n        <button @button=${this.handleBackButtonClick}>\n          ${BackButtonSvg}\n        </button>\n        <div>\n          ${WhiteKingSvg}\n          <p>${this.matchData?.white.username}</p>\n          <p>${this.matchData?.white.result}</p>\n          <p>${this.matchData?.white.rating}</p>\n        </div>\n      </div>\n    `\n  }\n\n\n  render() {\n    return this.matchData ? this.getGameHtml() : this.getTournamentHtml()\n  }\n}"]}